<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>满减优惠</title>
		<script type="text/javascript" src="assest/mui/js/jquery-3.1.0.min.js" ></script>
		<script src="js/vue.min.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript" src="js/sha1.js"></script>
		<script type="text/javascript" src="js/global.js" ></script>
		<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css"/>
		<style type="text/css">
			html,body{
				height: 100%;
				font-family: "微软雅黑";
			}
			.show{
				height: 6em;
				width: 100%;
				border-bottom: 0.5px solid #d2d2d2;
			}
			.show img{
				margin: 4.2% 4% 0% 7%;
				float: left;
				
			}
			.span1{
				font-size: 1em;
				color: #ff4040;
				display: inline-block;
				margin: 6% 0% 0% 4%;
				overflow: hidden;
				width: 40%;
			}
			.span2{
				display: inline-block;
				margin: 0% 0% 4% 4% ;
				font-size: 0.5em;
				color: #999999;
				width: 35%;
			}
			.spanr{
				display: inline-block;
				float: right;
				font-size: 2em;
				color: #ff4040;
				margin: 5% 3% 5% 0%;
				
			}
			
		</style>
	</head>
	<body>
		<div id="app">
			<div class="show"  v-for="item in list" @click="gonInneractivity(item.id)">
				<img :src="item.act_img" 	height="70%" />
				<span class="span1">满{{item.min_amount}}~{{item.max_amount}}元享折扣</span>
				<span class="spanr">8.8折</span>
				<br />
				<span class="span2">活动时间:{{item.start_time}}~{{item.end_time}}</span>
				
			</div>
		</div>
			
			<script type="text/javascript">
				var app = new Vue({
					el:"#app",
					data:{
						list:[],
						//活动id
                        actId:''
					},
					methods:{
                        gonInneractivity:function (actId) {
                            app.actId = actId;
                            var u = navigator.userAgent;
                            var isAndroid = u.indexOf('Android') > -1 || u.indexOf('Adr') > -1; //android终端
                            var isiOS = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/); //ios终端
                            if (isAndroid == true) {
                                android.goActivity();
                            } else {
                                goActivity()
                            }
                        }
					}
				});
				$(function () {
					transformParams(getActivities);
                });

				function getActivities(param) {
					$.ajax({
						url:' http://qpg.vlusi.com/api/api.php',
						type:'post',
						data:{
						    act:'activity_list',
							token:param.token,
							supplier_id:param.supplier_id,
                            signature:SHA2(`act=activity_list&supplier_id=${param.supplier_id}&token=${param.token}${param.transfer_key}`)
						},
						success:function (data) {
						    if(data.code == 200) {
                                app.list = data.data.filter(function (value,index) {
                                    return value.act_id == '5';
                                });
							}
                        },
						error:function (xhr,status,info) {
							mui.toast('服务器异常！');
                        }
					})
                }

                function goActivity() {

				}
			</script>
	</body>
</html>
